<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Documentation Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.simplex.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Documentation</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-assetLoader.html">assetLoader</a></li><li><a href="module-domUtils.html">domUtils</a></li><li><a href="module-gamepad.html">gamepad</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="Map.html">Map</a></li><li><a href="MapItem.html">MapItem</a></li><li><a href="module-gamepad-Gamepad.html">gamepad~Gamepad</a></li><li><a href="Texture.html">Texture</a></li>
				</ul>
			</li>
			
		</ul>
		<div class="col-sm-3 col-md-3">
            <form class="navbar-form" role="search">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                    <div class="input-group-btn">
                        <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                    </div>
                </div>
            </form>
        </div>
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	
	











	
	





    <section class="readme-section">
        <article><p><img src="https://cloud.githubusercontent.com/assets/2462139/12671050/6c0da564-c6b0-11e5-8a07-1380b8dddfaf.png" alt="pixelbox"></p>
<p>A sandbox framework to fast-prototype pixel-based games.</p>
<p><a href="https://nodei.co/npm/pixelbox/"><img src="https://nodei.co/npm/pixelbox.png?downloads=true&amp;stars=true" alt="Install with NPM"></a></p>
<p>Pixelbox is inspired by retro-computers and projects like <a href="http://www.lexaloffle.com/pico-8.php">PICO8</a> 
or <a href="https://twitter.com/pixelvision8">Pixel Vision 8</a></p>
<h1>Install</h1><p><code>npm install -g pixelbox</code></p>
<h1>Use</h1><p>Inside your new game project directory:</p>
<p><code>pixelbox</code></p>
<p>Pixelbox create a local server on port 3000 where your game is made available.
Just go to <code>http://localhost:3000/</code> with your web browser.
The application is rebuilt everytime you refresh the page in the browser.</p>
<p>At the first startup, pixelbox will create a set of files and directories:</p>
<pre class="prettyprint source"><code>assets/
 ├── spritesheet.png
 └── maps.json
audio/
build/
src/
 └── main.js
tools/
node_modules/
settings.json
index.html</code></pre><ul>
<li><code>assets/</code> is where you put your game assets files (images, text files, JSON)</li>
<li><code>audio/</code> is where you put sounds and music</li>
<li><code>src/</code> is the source folder, and <code>main.js</code> is the entry file of the game.</li>
</ul>
<h1>Programming with pixelbox</h1><p>Pixelbox provides:</p>
<ul>
<li>a main screen canvas in which you can <code>print</code> text, <code>draw</code> sprites, etc. </li>
<li>a transparent asset loader</li>
<li>a keyboard inputs manager</li>
<li>an audio manager with transparent loading system</li>
<li>an automatic builder</li>
<li>some customizable tools to create and edit your game assets (tile map, sprites)</li>
</ul>
<p>pixelbox is also built-in with the following libraries and modules:</p>
<ul>
<li><code>tina.js</code> tweening and animation library</li>
<li><code>EventEmitter</code> API compatible port of Node.js' EventEmitter to the browser</li>
<li><code>inherits</code> inheritance utility function</li>
</ul>
<h3>Program structure</h3><p>The game entry point is the <code>src/main.js</code> file.
If you provide a <code>exports.update</code> function, pixelbox will call it every frame.</p>
<p>Build is made using <a href="http://browserify.org/">browserify</a> which give you access
to <code>require</code> and <code>exports</code> to easily modularize your project.
The project is automaticaly rebuilt everytime you refresh the game page in your 
web browser.</p>
<h3>Assets</h3><p>Pixebox load all assets for you at startup.
All supported files you put inside the <code>assets/</code> directory will in an object <code>assets</code>.
The structure follow the structure of the directory. For instance, the file
file located in <code>assets/sprites/player.png</code> will be accessible with 
<code>assets.sprites.player</code>.</p>
<p>Supported files includes: </p>
<ul>
<li>images (<code>.png</code>, <code>.jpg</code>)</li>
<li>plain text files (<code>.txt</code>)</li>
<li>JSON formatted data (<code>.json</code>)</li>
</ul>
<p>You directly have access to JSON content.</p>
<p>Because files are loaded inside <code>assets</code> object and refered wthout their extension,
you cannot have a file and a directory with the same name inside the same directory.</p>
<h1>Pixelbox API</h1><p>Pixelbox expose the following methods directly on the global scope:</p>
<h3>Graphics</h3><ul>
<li><code>cls()</code> clear screen with <em>paper</em> color</li>
<li><code>sprite(n, x, y [,flipH [,flipV [, flipR]]])</code> draw sprite number <code>n</code> on screen at pixel position <code>(x, y)</code>. 
<code>flipH</code> and <code>flipV</code> can be used to flip sprite horizontally or vertically, <code>flipR</code> adds a 90 degree clockwize rotation.</li>
<li><code>draw(image, x, y [,flipH [,flipV [, flipR]]])</code> draw an <em>Image</em>, <em>Texture</em> or <em>Map</em> (tile map) on screen at pixel position <code>(x, y)</code></li>
<li><code>spritesheet(image)</code> change image used as default spritesheet</li>
<li><code>rect(x, y, w, h)</code> stroke a rectangle with <em>pen</em> color</li>
<li><code>rectfill(x, y, w, h)</code> fill a rectangle with <em>paper</em> color</li>
<li><code>camera(x, y)</code> scroll add further drawing by provided position</li>
</ul>
<h3>Text</h3><p>Pixelbox has a predefined bitmap font that you can use to print text on screen or in textures.</p>
<ul>
<li><code>print(text, [x, y])</code> if x, y is provided, print text at pixel position (x, y). 
else print text at cursor current position.</li>
<li><code>println(text)</code> print text and feed new line. 
When cursor reach the bottom of the screen, a vertical scroll is applied 
(just like it would happend in a terminal.)</li>
<li><code>locate(i, j)</code> set cursor position at column i line j</li>
<li><code>pen(colorId)</code> set text color to colorId in color palette</li>
<li><code>paper(colorId)</code> set paper color to colorId in color palette.</li>
</ul>
<h3>Controls</h3><ul>
<li><code>btn</code> state of the buttons. available buttons are: <code>up</code>, <code>down</code>, <code>left</code>, <code>right</code>, <code>A</code>, <code>B</code></li>
<li><code>btnp</code> if button has been pressed in current frame</li>
<li><code>btnr</code> if button has been released in current frame</li>
</ul>
<h3>Sound</h3><ul>
<li><code>sfx('sound');</code> play the sound.mp3 file in <code>audio/</code> folder</li>
<li><p><code>music('bgm');</code> play the bgm.mp3 file in loop. If another music is already playing,
it will fade in and out to the new music. If no soundId is provided, the music stops.</p>
<p><a href="https://github.com/Wizcorp/AudioManager">AudioManager</a> is the module that handle audio 
loading and playback. You have access to its instance on <code>audioManager</code>.</p>
</li>
</ul>
<h3>Utility functions</h3><ul>
<li><code>clip(value, min, max)</code> clip a value between min and max</li>
<li><code>chr$(n)</code> return a character from code <code>n</code>.</li>
<li><code>random(n)</code> return a random <strong>integer</strong> between 0 and n</li>
<li><code>inherits(Child, Parent)</code> make class <em>Child</em> inherits from class <em>Parent</em></li>
</ul>
<h1>Pixelbox components</h1><h3>Texture</h3><p>Texture is a basically a wrapper of an HTML canvas element that adds functionalities for Pixelbox rendering.</p>
<p>The main screen (accessible by the global variable <code>$screen</code>) is an instance of Texture and most of its methods
are accessible from the global scope.</p>
<p>To create new texture, you need to require the <code>Texture</code> module:</p>
<pre class="prettyprint source lang-javascript"><code>var Texture = require('Texture');
var texture = new Texture(128, 128); // create a new texture of 128 by 128 pixels</code></pre><h4>Texture settings</h4><pre class="prettyprint source lang-javascript"><code>texture.resize(width, height);
texture.setPalette(palette);
texture.pen(colorIndex); // set PEN color index from palette (pen is used for text and stroke)
texture.paper(colorIndex); // set PAPER color index from palette (paper is used for fill)
texture.setSpritesheet(spritesheet); // set spritesheet used for this texture</code></pre><p>A spritesheet is an Image containing 256 sprites organized in a 16 x 16 grid 
(the size of the spritesheet depend of the sprite size you set for your game).</p>
<h4>Rendering</h4><pre class="prettyprint source lang-javascript"><code>texture.clear(); // clear texture (it become transparent)
texture.cls(); // clear screen (the whole texture is filled with the PAPER color)
texture.sprite(sprite, x, y, flipH, flipV, flipR); // draw a sprite from current spritesheet in the texture
texture.draw((img, x, y, flipH, flipV, flipR); // draw an image in texture. img can also be another Texture or a Map
texture.rect(x, y, width, height); // stroke a rectangle
texture.rectfill(x, y, width, height); // fill a rectangle</code></pre><h4>Printing text</h4><pre class="prettyprint source lang-javascript"><code>texture.locate(i, j); // set text cursor to specified location
texture.print(text, x, y); // print some text
texture.println(text); // print some text and feed a new line</code></pre><h3>Maps</h3><p>Pixelbox has a built-in <code>Map</code> (tile map) component.
A Map consist of:</p>
<ul>
<li>A name</li>
<li>A spritesheet. When the spritesheet is changed, the whole map will be redrawn with the new spritesheet.</li>
<li>A grid of sprites from the spritesheet plus few flags to flip or rotate sprites.</li>
</ul>
<p>Once created, a map is rendered in one draw call only.</p>
<p>Map can be used to reder a level made of sprites, or just to store game data.</p>
<p>You can create maps from your game code; But usually, you will be using Pixelbox's
tools (see the Tools section bellow) to create and manage your maps as game assets. 
A map can then be retrived by its name with Pixelbox's <code>getMap</code> function. 
The map can then be drawn on screen (or in another Texture), modified, copied, pasted, resized, etc.</p>
<p>When stored in assets, the map is compressed to Pixelbox format to reduce file size.</p>
<h4>Get map</h4><pre class="prettyprint source lang-javascript"><code>var map = getMap('mapName'); // get a map by its name</code></pre><p>To create new maps, you need to require the <code>Map</code> module:</p>
<pre class="prettyprint source lang-javascript"><code>var Map = require('Map');
var map = new Map(16, 16); // create a new map of 16 by 16 tiles</code></pre><h4>Draw map</h4><pre class="prettyprint source lang-javascript"><code>map.draw(x, y);  // draw map on screen at [x, y] position
draw(map, x, y); // idem, using the global draw function
texture.draw(map, x, y); // draw a map in another texture
map.setSpritesheet(spritesheet); // set spritesheet to use for this map. The whole map is redrawn when calling this function.</code></pre><h4>Access map content</h4><pre class="prettyprint source lang-javascript"><code>map.get(x, y); // returns the MapItem at position [x, y]. null if empty
map.set(x, y, sprite, flipH, flipV, flipR, flagA, flagB); // add a sprite
map.remove(x, y); // remove sprite at position [x, y]. (set it to null)
map.find(sprite, flagA, flagB); // find all items with specified properties</code></pre><h4>Modifying maps</h4><pre class="prettyprint source lang-javascript"><code>map.resize(width, height); // resize the map (size unit is tiles)
map.clear(); // Reset the whole map content by setting all its items to null
var mapCopy = map.copy(x, y, width, height); // copy this map to a new one.
               // x, y, width, height can be specified to copy only a rectangular part of the map.
map.paste(mapCopy, x, y, merge); // paste map data in the map at position offset [x, y].
               // if 'merge' flag is set, then null tiles will not overwrite current map tile.</code></pre><h3>Gamepad</h3><p>The <code>gamepad</code> module allow easy access to gamepads if the browser supports it.</p>
<pre class="prettyprint source lang-javascript"><code>getGamepads(); // get all gamepads state
getGamepad(id); // get gamepad state
getAnyGamepad(); // Merge states of all gamepads and return a global gamepad state.</code></pre><p>the gamepad state returned by these function works like keyboard controls:
You get the state of each buttons, button presses and button release, plus the values of analog controls.</p>
<pre class="prettyprint source lang-javascript"><code>var gamepad = require('gamepad'); // require the gamepad module
var state = gamepad.getGamepad(0); // get state of gamepad id 0

// buttons:
state.btn.A; // state of A button
state.btn.B; // state of B button
state.btn.X; // state of X button
state.btn.Y; // state of Y button
state.btn.start; // state of 'start' button
state.btn.back;  // state of 'back' button
state.btn.up;    // directionnal pad's up button
state.btn.down;  // directionnal pad's down button
state.btn.left;  // directionnal pad's left button
state.btn.right; // directionnal pad's right button
state.btn.lb; // left bumper button
state.btn.rb; // right bumper button
state.btn.lt; // left trigger button
state.btn.rt; // right trigger button

// button press and release.
// the structure is the same as state.btn but the values are true only 
// on button press or release.
state.btnp; // button press
state.btnr; // button release

// analog values
state.x  // x axe value (first stick horizontal)
state.y  // y axe value (first stick vertical)
state.z  // z axe value (second stick horizontal)
state.w  // w axe value (second stick vertical)
state.lt // left trigger analog value
state.rt // right trigger analog value</code></pre><h1>Tools</h1><p>Tools are accessible at <code>http://localhost:3000/tools/</code></p>
<p><img src="https://cloud.githubusercontent.com/assets/2462139/12670965/d091a37e-c6af-11e5-8537-f82689f3496c.png" alt="pixelbox_tools"></p>
<h2>Assets browser</h2><p>Displays assets and maps in a tree view.</p>
<h2>Map editor window</h2><ul>
<li>Draw sprites with the mouse.</li>
<li>Hold <code>Shift</code> to erase.</li>
<li>Hold <code>Alt</code> to scroll inside the map.</li>
</ul>
<h2>Spritesheet window</h2><p>display the spritesheet used by the map currently edited in the <code>Map editor</code> window.
Spritesheet is saved with the map. When a map is loaded, the spritesheet will be updated accordingly.
Images from <code>Assets browser</code> window can be drag and droped in the <code>Spritesheet</code> window.</p>
<p>From this window, you can select the sprite and its transformations flags to be used when editing the map.</p>
<h2>Custom tools</h2><p>You can program your custom tools to be used inside the tools interface.
Custom tool scripts goes in the <code>tools</code> folder and will appears in the <code>Custom tools</code> window.</p>
<p>see <a href="https://github.com/cstoquer/pixelbox-utilities/tree/master/tools">pixelbox-utilities</a> 
for code examples of custom tools.</p>
<h1>Deployment</h1><p>When your game is ready, the files you should deploy are:
<code>assets</code>, <code>audio</code> and <code>build</code> folders along with the <code>index.html</code> file.</p>
<h1>Settings</h1><p><code>settings.json</code> file let you change pixelbox parameters:</p>
<ul>
<li>sprite size. default is 8x8 pixels</li>
<li>pixel size. default is 4x4 pixels</li>
<li>canvas screen size. default is 128x128 pixels</li>
<li>color palette.</li>
</ul></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>

<div class="modal fade" id="searchResults">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Search results</h4>
      </div>
      <div class="modal-body"></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>

<footer>


<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a>
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>
<script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>

<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : false,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			var id = $( heading ).attr( "id" );
			return id && id.replace(/\~/g, '-inner-').replace(/\./g, '-static-') || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->


<script type="text/javascript">
	$(document).ready(function() {
		SearcherDisplay.init();
	});
</script>

</body>
</html>